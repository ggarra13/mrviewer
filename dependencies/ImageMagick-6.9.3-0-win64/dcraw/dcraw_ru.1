.\"
.\" Руководство к программе dcraw ("Декодер сырых фотографий")
.\"
.\" (c) Дэвид Коффин, 2009
.\"
.\" Распространяется свободно.
.\"
.\" David Coffin
.\" dcoffin a cybercom o net
.\" http://www.cybercom.net/~dcoffin
.\"
.TH dcraw 1 "14 май 2009"
.LO 1
.SH ИМЯ
dcraw - консольный декодер сырых (RAW) цифровых фотографий
.SH ОБЗОР
.B dcraw
[\fIОПЦИЯ\fR]... [\fIФАЙЛ\fR]...
.SH ОПИСАНИЕ
.B dcraw
конвертирует сырые (RAW) фотографии, показывает
метаданные и извлекает уменьшенные изображения - миниатюры.
.SH ОСНОВНЫЕ ОПЦИИ
.TP
.B -v
Выдает подробные сообщения, а не только предупреждения и ошибки.
.TP
.B -c
Выдает расшифрованное изображение или миниатюру на стандартный
вывод (stdout).
.TP
.B -e
Извлекает сгенерированное фотокамерой изображение-миниатюру,
но не сырое изображение. Выдается файл JPEG или PPM, в
зависимости от используемой фотокамеры.
.TP
.B -z
Изменяет время последнего доступа и модификации AVI, JPEG,
TIFF и сырых файлов на время получения снимка, предполагая,
что часы фотокамеры настроены на время по Гринвичу.
.TP
.B -i
Идентифицирует файлы без их расшифровки.
Статус завершения равен 0 если
.B dcraw
может расшифровать последний файл и 1, если нет.
.B -i -v
показывает метаданные.
.TP
.B ""
.B dcraw
не расшифровывает JPEG файлы!!!
.SH КОРРЕКТИРУЮЩИЕ ОПЦИИ
.TP
.B -P повреж_пиксели.txt
Читает список поврежденных пикселей из данного файла вместо файла ".badpixels".
Смотри в разделе
.B ФАЙЛЫ
описание данного формата.
.TP
.B -K темновой_кадр.pgm
Вычитает темновой кадр из сырых данных. Для получения темнового
кадра сделайте сырой снимок в полной темноте (например, закрыв
объектив фотокамеры светонепроницаемой крышкой) и выполните
.BR dcraw\ -D\ -4\ -j\ -t\ 0 .
.TP
.B -k темновой_уровень
Когда тени выглядят туманными, необходимо поднять темновой уровень.
Для измерения этого, примените
.B pamsumm -mean
к темновому кадру, полученному выше.
.TP
.B -S насыщенность
Когда пересвеченные области выглядят розовыми, необходимо понизить уровень
насыщенности.  Для измерения этого, сделайте снимок какого-либо блестящего
объекта и выполните
.B dcraw -D -4 -j -c
фото.raw
.B | pamsumm -max
.TP
.B ""
Темновой уровень и насыщенность, установленные по умолчанию, обычно верны.
.TP
.B -n шумовой_порог
Использует вейвлеты для подавления шума с сохранением настоящих
деталей изображения. Лучшее пороговое значение должно лежать где-то
в промежутке от 100 до 1000.
.TP
.B -C увел_красный увел_синий
Увеличить красный и синий слои в заданное множителями количество раз
(обычно от 0.999 до 1.001) для устранения хроматической аберрации.
.TP
.B -H 0
Урезает все пересвеченные области до сплошного белого
(действие по умолчанию).
.TP
.B -H 1
Оставляет пересвеченные области неурезанными в различных
оттенках розового. Позволяет выявить сохранившиеся детали.
.TP
.B -H 2
Смешивает урезанные и неурезанные значения для постепенного
перехода к белому.
.TP
.B -H 3+
Восстанавливает пересвеченные области. Малые числа больше
подходят для белых областей, большие числа - для цветных.
Попробуйте
.B -H 5
в качестве компромиссного варианта. Если результат
выглядит недостаточно хорошим, выполните
.BR -H\ 9 ,
вырежьте цветные пересвеченные области, и вставьте их в
изображение, сгенерированное командой
.BR -H\ 3 .
.SH ЦВЕТОВЫЕ ОПЦИИ
По умолчанию,
.B dcraw
использует фиксированный баланс белого, полученный с помощью
цветной испытательной таблицы, освещенной стандартной лампой D65.
.TP
.B -w
Использует баланс белого, заданный камерой. В случае, если таковой
не задан, выводит предупреждение и использует другой метод.
.TP
.B -a
Расчитывает баланс белого, используя всё изображение.
.TP
.B -A отступ_слева отступ_сверху ширина высота
Рассчитывает баланс белого, используя прямоугольную область изображения.
Вначале выполните
.B dcraw\ -j\ -t\ 0
и выберите область с нейтрально-серым цветом.
.TP
.B -r множ0 множ1 множ2 множ3
Позволяет задать пользовательский баланс белого.
Эти множители могут быть взяты из вывода команды
.BR dcraw\ -v .
.TP
.BR +M " или " -M
Использует (или не использует) матрицу цвета из метаданных фотокамеры.
По умолчанию установлено
.BR +M ,
если выбрана опция
.BR -w .
В противном случае
.BR -M .
Эта опция влияет только на камеры Olympus, Leaf и Phase One.
.TP
.B -o [0-5]
Позволяет выбрать выходное цветовое пространство, при
использовании опции
.B -p
:

.B 0
\ \ Вывод в собственном цветовом пространстве камеры
(уникально для каждой фотокамеры)
.br
.B 1
\ \ sRGB D65 (по умолчанию)
.br
.B 2
\ \ Adobe RGB (1998) D65
.br
.B 3
\ \ Wide Gamut RGB D65
.br
.B 4
\ \ Kodak ProPhoto RGB D65
.br
.B 5
\ \ XYZ
.TP
.BR -p\ фотокамера.icm \ [\  -o\ вывод.icm \ ]
Использует ICC профили для задания собственного цветового
пространства фотокамеры и выводимого цветового пространства
(sRGB по умолчанию).
.TP
.B -p embed
Использует ICC профиль, внедренный в сырой снимок.
.SH ОПЦИИ ИНТЕРПОЛЯЦИИ
.TP
.B -d
Показывает сырые данные как изображение в градациях серого без
интерполяции. Хорош для фотографирования черно-белых документов.
.TP
.B -D
То же, что и
.BR -d ,
но в полностью необработанном виде (без цветового баланса).
.TP
.B -h
Выдает цветное изображение, уменьшенное вдвое.
В два раза быстрее, чем
.BR -q\ 0 .
.TP
.B -q 0
Использует быструю низкокачественную билинейную интерполяцию.
.TP
.B -q 1
Использует интерполяцию VNG (по Переменному Числу Градиентов).
.TP
.B -q 2
Использует интерполяцию PPG (Группировка Пикселей по Шаблону).
.TP
.B -q 3
Использует интерполяцию AHD (Адаптивную Гомогенно-Ориентированную).
.TP
.B -f
Интерполирует RGB как четыре цвета. Используется, когда на
полученном изображении видны искажения в виде ложной сетки
2x2 (при VNG интерполяции), или узор в виде лабиринта при
AHD интерполяции.
.TP
.B -m число_проходов
Подчищает цветовые артефакты (искажения) путем многократного
применения медианного фильтра 3x3 к цветовым каналам R-G и B-G.
.SH ОПЦИИ ВЫВОДА
По умолчанию,
.B dcraw
записывает 8-битные PGM/PPM/PAM данные с гамма кривой BT.709,
уровнем белого, базирующемся на гистограмме, и без метаданных.
.TP
.B -W
Использует фиксированный уровень белого, игнорируя гистограмму изображения.
.TP
.B -b яркость
Делит уровень белого на это число, равное 1.0 по умолчанию.
.TP
.B -g степень максимальный_подъём
Настройка гамма кривой, по умолчанию BT.709
.RB ( -g\ 2.222\ 4.5 ).
Если вы предпочитаете sRGB гамму, воспользуйтесь
.BR -g\ 2.4\ 12.92 .
Для простой потенциальной кривой, установите максимальный подъём равный нулю.
.TP
.B -6
Записывает 16-битное изображение вместо 8-битного.
.TP
.B -4
Записывает линейные 16 бит, то же, что
.BR -6\ -W\ -g\ 1\ 1 .
.TP
.B -T
Выдает на выходе файл формата TIFF с метаданными вместо PGM/PPM/PAM.
.TP
.B -t [0-7,90,180,270]
Поворачивает выводимое фото. По умолчанию,
.B dcraw
применяется поворот, заданный фотокамерой.
.B -t 0
отключает все виды вращения.
.TP
.B -j
Для фотокамер Fuji\ Super\ CCD показывает изображение,
повернутое на 45 градусов. Для фотокамер с неквадратными
пикселями выдает изображение нерастянутым, с сохранением его
оригинальных пропорций. В любом случае, каждый выводимый
пиксель соответствует одному сырому пикселю.
.TP
.BR "-s [0..N-1]" " или " "-s all"
Если файл содержит N сырых изображений, выбирает одно или
"all" (все) для расшифровки.
Например, фотокамеры Fuji\ Super\ CCD\ SR генерируют второе
изображение, недоэкспонированное на 4 шага диафрагмы, что
позволяет запечатлеть детали в пересвеченных областях.
.SH ФАЙЛЫ
.TP
\:./.badpixels, ../.badpixels, ../../.badpixels, ...
Список поврежденных пикселей вашей фотокамеры, указывающий
.B dcraw
интерполировать вокруг них. Каждая строка определяет колонку, ряд
и Юниксовое время повреждения одного пикселя. Например:
.sp 1
.nf
 962   91 1028350000  # пиксель поврежден между 1 и 4 августа 2002
1285 1067 0           # время повреждения пикселя не известно
.fi
.sp 1
Эти координаты определяются для изображений, к которым не были
применены какие-либо виды вырезания или вращения, поэтому используйте
.B dcraw -j -t 0
для локализации поврежденных пикселей.
.SH "СМОТРИ ТАКЖЕ"
.BR pgm (5),
.BR ppm (5),
.BR pam (5),
.BR pamsumm (1),
.BR pnmgamma (1),
.BR pnmtotiff (1),
.BR pnmtopng (1),
.BR gphoto2 (1),
.BR cjpeg (1),
.BR djpeg (1)
.SH АВТОР
Дэвид Коффин, dcoffin улитка cybercom точка net
.SH
ПЕРЕВОДЧИКИ
Елена Буторина, elena улитка esperanto точка msx точка ru
.br
Максим, volmax улитка rambler точка ru
